<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Air Quality & Asthma Dashboard</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f6f8; margin:0; }
    header { background: #2c3e50; color: #ecf0f1; padding: 1rem; text-align: center; }
    .container { max-width:1200px; margin:2rem auto; padding:0 1rem; }
    .description { margin-bottom:1.5rem; color:#333; }
    .graph { margin-bottom:2rem; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1); padding:1rem; background:white; }
    footer { text-align:center; font-size:0.9rem; color:#777; padding:2rem 0; }
  </style>
</head>
<body>
  <header>
    <h1>Air Quality & Asthma Dashboard</h1>
  </header>
  <div class="container">
    <p class="description">
      Explore the spatial patterns of adult asthma prevalence (CDC BRFSS 2021) 
      alongside U.S. ozone sensor measurements (OpenAQ 2024), and view seasonal 
      trends in ozone concentration.
    </p>

    <div id="graph1" class="graph"></div>
    <div id="graph2" class="graph"></div>
    <div id="graph3" class="graph"></div>

    <p>
      <strong>Data sources:</strong> 
      CDC BRFSS Table L6 (2021), OpenAQ (2024).<br>
      <strong>Acknowledgement:</strong> Jiean Zhou & Nazirjon Ismoiljonov.
    </p>
  </div>
  <footer>
    &copy; 2025 Verido.ai | Data Visualization Project
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Parse JSON strings passed from Flask
      const fig1 = JSON.parse(`{{ fig1_json|safe }}`);
      const fig2 = JSON.parse(`{{ fig2_json|safe }}`);
      const fig3 = JSON.parse(`{{ fig3_json|safe }}`);

      Plotly.newPlot('graph1', fig1.data, fig1.layout, {responsive:true});
      Plotly.newPlot('graph2', fig2.data, fig2.layout, {responsive:true});
      Plotly.newPlot('graph3', fig3.data, fig3.layout, {responsive:true});
    });
  </script>
</body>
</html>
